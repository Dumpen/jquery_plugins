function object(o){var S=function(){};S.prototype=o;return new S();}
(function($){var QS=function($e,op){$e=$($e);var AI={},cLI=true,SS=-1,hF=false,kC,pv,tout,ies=false,$r=$('<div class="'+op.resultsClass+'" style="display:block;position:absolute"><\/div>').hide(),$m=$('<iframe />');$m.css({border:'none',position:'absolute'});if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){if(Number(RegExp.$1)<=7){ies=true;}}if(op.width>0){$r.css("width",op.width);$m.css("width",op.width);}$('body').append($r);if(ies){$('body').append($m);}var gL=function(t){return t.label||(typeof(t)==='string'?t:t[0])||'';};var gV=function(t){return t.values||(t.value?[t.value]:(typeof(t)==='string'?[t]:t))||[];};var mcs={quicksilver:function(q,d){q=q.toLowerCase();AI[q]=[];for(var i in d){if(gL(d[i]).toLowerCase().score(q)>0){AI[q].push(d[i]);}}return AI[q].sort(function(a,b){a=gL(a).toLowerCase().score(q);b=gL(b).toLowerCase().score(q);return a>b?-1:(b>a?1:0);});},contains:function(q,d){q=q.toLowerCase();AI[q]=[];for(var i in d){if(gL(d[i]).toLowerCase().indexOf(q)>-1){AI[q].push(d[i]);
}}return AI[q].sort(function(a,b){a=gL(a).toLowerCase();b=gL(b).toLowerCase();return a.indexOf(q)>b.indexOf(q)?-1:(a.indexOf(q)<b.indexOf(q)?1:(a>b?-1:(b>a?1:0)));});},startsWith:function(q,d){q=q.toLowerCase();AI[q]=[];for(var i in d){if(gL(d[i]).toLowerCase().indexOf(q)===0){AI[q].push(d[i]);}}return AI[q].sort(function(a,b){a=gL(a).toLowerCase();b=gL(b).toLowerCase();return a>b?-1:(b>a?1:0);});}};var fds={store:function(q,c){c(op.data);},ajax:function(q,c){var u=op.ajax+"?q="+encodeURI(q);for(var i in op.ajaxParams){u+="&"+i+"="+encodeURI(op.ajaxParams[i]);$.getJSON(u,c);}}};var mS=function(x){var li=$('li',$r);if(!li){return;}if(typeof(x)==="number"){SS=SS+x;}else{SS=li.index(x);}if(SS<0){SS=0;}else{if(SS>=li.size()){SS=li.size()-1;}}li.removeClass(op.selectedClass);$(li[SS]).addClass(op.selectedClass);if(op.autoFill&&kC!==8){$e.val(pv+$(li[SS]).text().substring(pv.length));var ss=pv.length,se=$e.val().length,f=$e[0];if(f.createTextRange){var sR=f.createTextRange();sR.collapse(true);
sR.moveStart("character",ss);sR.moveEnd("character",se);sR.select();}else{if(f.setSelectionRange){f.setSelectionRange(ss,se);}else{if(f.selectionStart){f.selectionStart=ss;f.selectionEnd=se;}}}f.focus();}};var hRN=function(){if(tout){clearTimeout(tout);}$e.removeClass(op.loadingClass);if($r.is(":visible")){$r.hide();}if($m.is(":visible")){$m.hide();}};var sI=function(l,f){if(!l){l=document.createElement("li");l.item='';}var b=gL(l.item),v=gV(l.item);$e.lS=b;$e.val(b);pv=b;$r.empty();if(op.additional_fields){op.additional_fields.each(function(i,e){e.value=v[i+1];});}if(!f){hRN();}if(op.onItemSelect){setTimeout(function(){op.onItemSelect(l);},1);}return true;};var sC=function(){var li=$("li."+op.selectedClass,$r)[0];if(li){return sI(li);}else{if(op.exactMatch){$e.val('');if(op.additional_fields){op.additional_fields.each(function(i,input){$(input).val('');});}}return false;}};var rI = function(t){$r.empty();var ul=document.createElement("ul");$r.append(ul);if(!hF||t===null||t.length===0){
return hRN();}var tc=t.length;if(op.maxVisibleItems>0&&op.maxVisibleItems<tc){tc=op.maxVisibleItems;}var hf=function(){mS(this);},bf=function(){},cf=function(e){e.preventDefault();e.stopPropagation();sI(this);};for(var i=0;i<tc;i+=1){var m=t[i],li=document.createElement("li");$r.append(li);$(li).text(op.formatItem?op.formatItem(m,i,tc):gL(m));li.item=m;if(m.className){li.className=m.className;}ul.appendChild(li);$(li).hover(hf,bf).click(cf);}$e.removeClass(op.loadingClass);};var rP=function(q,callback){fds[!op.data?'ajax':'store'](q,function(d){rI(mcs[op.matchMethod](q,d));callback();});};var shR=function(){var p=$e.offset(),w=parseInt(op.width>0?op.width:$e.width(),10);$r.css({width:w+"px",top:p.top+$e.height()+5+"px",left:p.left+"px"});if(ies){$m.css({width:w-2+"px",top:p.top+$e.height()+6+"px",left:p.left+1+"px",height:$r.height()-2+'px'}).show();}$r.show();var $lis=$('li',$r);if(op.autoSelectFirst||(op.selectSingleMatch&&$lis.length===1)){mS($lis[0]);}};var oCh=function(){if(kC>8&&kC<46)
{return;}var q=$e.val();if(q===pv){return;}pv=q;if(q.length>=op.minChars){$e.addClass(op.loadingClass);rP(q,shR);}else{if(q.length===0&&(op.onBlank?op.onBlank():true)){if(op.additional_fields){op.additional_fields.each(function(i,input){input.value='';});}}$e.removeClass(op.loadingClass);$r.hide();$m.hide();}};$r.mousedown(function(e){cLI=e.srcElement.tagName!=='DIV';});$e.keydown(function(e){kC=e.keyCode;switch(e.keyCode){case 38:e.preventDefault();mS(-1);break;case 40:e.preventDefault();if(!$r.is(":visible")){shR();mS(0);}else{mS(1);}break;case 13:if(sC()){e.preventDefault();$e.select();}break;case 9:sC();break;case 27:if(SS>-1&&op.exactMatch&&$e.val()!==$('li',$r).get(SS).text()){SS=-1;}$('li',$r).removeClass(op.selectedClass);hRN();e.preventDefault();break;default:if(tout){clearTimeout(tout);}tout=setTimeout(oCh,op.delay);break;}}).focus(function(){hF=true;}).blur(function(e){if(cLI){if(SS>-1){sC();}hF=false;if(tout){clearTimeout(tout);}tout=setTimeout(function(){hRN();
if(op.exactMatch&&$e.val()!==$e.lS){sI(null,true);}},200);}else{e.srcElement.focus();}});};$.fn.quickselect=function(op,d){op=op||{};op.data=typeof(op.data)==="object"&&op.data.constructor===Array?op.data:d;op.ajaxParams=op.ajaxParams||{};op.delay=op.delay||400;op.minChars=op.minChars||1;op.cssFlavor=op.cssFlavor||'quickselect';op.inputClass=op.inputClass||op.cssFlavor+"_input";op.loadingClass=op.loadingClass||op.cssFlavor+"_loading";op.resultsClass=op.resultsClass||op.cssFlavor+"_results";op.selectedClass=op.selectedClass||op.cssFlavor+"_selected";op.matchMethod=op.matchMethod||((typeof(''.score)==='function')&&'l'.score('l')===1?'quicksilver':'contains');if(op.matchCase===undefined){op.matchCase=false;}if(op.exactMatch===undefined){op.exactMatch=false;}if(op.autoSelectFirst===undefined){op.autoSelectFirst=true;}if(op.selectSingleMatch===undefined){op.selectSingleMatch=true;}op.maxVisibleItems=op.maxVisibleItems||-1;if(op.autoFill===undefined||op.matchMethod!=='startsWith'){op.autoFill=false;
}op.width=parseInt(op.width,10)||0;this.each(function(){var n=this,my_op=object(op);if(this.tagName==='INPUT'){QS(n,my_op);}else{if(n.tagName==='SELECT'){my_op.delay=my_op.delay||10;var id=n.id,cN=n.className,ak=$(n).attr('accesskey'),tn=$(n).attr('tabindex'),sop=$("option:selected",n)[0];my_op.data=[];$('option',n).each(function(i,z){my_op.data.push({label:$(z).text(),values:[z.value,z.value],className:z.className});});var ti=$("<input type='text' class='"+cN+"' id='"+id+"_quickselect' autocomplete='off' accesskey='"+ak+"' tabindex='"+tn+"' />");if(sop){ti.val($(sop).text());}var hd=$("<input type='hidden' id='"+id+"' name='"+n.name+"' />");if(sop){hd.val(sop.value);}my_op.additional_fields=hd;$(n).after(ti).after(hd).remove();ti.quickselect(my_op);}}});};}(jQuery));