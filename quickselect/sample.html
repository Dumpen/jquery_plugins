<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<title>jQuery Autocomplete</title>
	<script type="text/javascript" src="jquery-1.2.6.pack.js"></script>
	<script type='text/javascript' src='quicksilver.js'></script>
	<script type='text/javascript' src='jquery.quickselect.js'></script>
	<link rel="stylesheet" type="text/css" href="jquery.autocomplete.css" />
</head>

<body>

<h1>
	jQuery Autocomplete Mod
</h1>

<p>
	This is modification of <a href="http://www.dyve.net/jquery/?autocomplete">Dylan Verheul's jQuery Autcomplete plug-in</a>.
	I customized his library adding the features I needed and fixing issues
	I considered bugs.
</p>

<h2>
	Enhancements
</h2>
<ul>
	<li>
		Supports local data array (can now use w/out AJAX).
	</li>
	<li>
		Limit dropdown to XX number of results (good for limiting
		the results to users)
	</li>
	<li>
		Autofill pre-populates text box as you type
	</li>
	<li>
		New findValue() method can be used to programmatically
		determine if the value in the box is a valid option.
		(Useful for verifying the text entered is an existing
		value option.)
	</li>
	<li>
		Dropdown options now correctly re-position themselves on
		each display (which means they adjust for changing to the
		DOM)
	</li>
	<li>
		Dropdown box defaults to the width of the input field its
		attached to (you can manually specify a larger width as well)
	</li>
	<li>
		Better emulates Windows autocomplete boxes (for example: hitting delete
		and retyping the same box will now bring back the dropdown
		menu)
	</li>
	<li>
		Miscellaneous bug fixes
	</li>
</ul>

<form action="" onsubmit="return false;">

	<p>
		Local City Autocomplete:
		<input type="text" id="CityLocal" value="" />
		<input type="button" value="Get Value" onclick="lookupLocal();" />
		(Shows a max of 10 entries)
	</p>

	<p>
		Ajax City Autocomplete:
		<input type="text" id="CityAjax" value="" style="width: 200px;" />
		<input type="button" value="Get Value" onclick="lookupAjax();" />
		<input id='other_thing_field' type='text' name='other_thing' />
	</p>

	<p>
		City Select, translated:
		<select name="city_select" id="city_select">
			<option value=''></option>
      <option value='1'>Aberdeen</option>
      <option value='2'>Ada</option>
      <option value='3'>Adamsville</option>
      <option value='4'>Addyston</option>
      <option value='5'>Adelphi</option>
      <option value='6'>Adena</option>
      <option value='7'>Adrian</option>
      <option value='8'>Akron</option>
      <option value='9'>Albany</option>
      <option value='10'>Alexandria</option>
      <option value='11'>Alger</option>
      <option value='12'>Alledonia</option>
      <option value='13'>Alliance</option>
      <option value='14'>Alpha</option>
      <option value='15'>Alvada</option>
      <option value='16'>Alvordton</option>
      <option value='17'>Amanda</option>
      <option value='18'>Amelia</option>
      <option value='19'>Amesville</option>
      <option value='20'>Amherst</option>
      <option value='21'>Amlin</option>
      <option value='22'>Amsden</option>
      <option value='23'>Amsterdam</option>
      <option value='24'>Andover</option>
      <option value='25'>Anna</option>
      <option value='26'>Ansonia</option>
      <option value='27'>Antwerp</option>
      <option value='28'>Apple Creek</option>
      <option value='29'>Arcadia</option>
      <option value='30'>Arcanum</option>
      <option value='31'>Archbold</option>
      <option value='32'>Arlington</option>
      <option value='33'>Ashland</option>
      <option value='34'>Ashley</option>
      <option value='35'>Ashtabula</option>
      <option value='36'>Ashville</option>
      <option value='37'>Athens</option>
      <option value='38'>Attica</option>
      <option value='39'>Atwater</option>
      <option value='40'>Augusta</option>
      <option value='41'>Aurora</option>
      <option value='42'>Austinburg</option>
      <option value='43'>Ava</option>
      <option value='44'>Avon</option>
		</select>
	</p>

	<p>
		Some dropdown 2:
		<select name="Test2" id="idTest2">
			<option value="1">Item 1</option>
			<option value="2">Item 2</option>
			<option value="3">Item 3</option>
			<option value="4">Item 4</option>
		</select>
	</p>

	<p>
		Some dropdown 3:
		<select name="Test3" id="idTest3">
			<option value="1">Item 1</option>
			<option value="2">Item 2</option>
			<option value="3">Item 3</option>
			<option value="4">Item 4</option>
		</select>
	</p>

</form>

<script type="text/javascript">
function findValue(li) {
	if( li == null ) return alert("No match!");

	// if coming from an AJAX call, let's use the CityId as the value
	if( !!li.extra ) var sValue = li.extra[0];

	// otherwise, let's just display the value in the text box
	else var sValue = li.selectValue;

	alert("The value you selected was: " + sValue);
}

function selectItem(li) {
	findValue(li);
}

function formatItem(row) {
	return row[0] + " (id: " + row[1] + ")";
}

function lookupAjax(){
	var oSuggest = $("#CityAjax")[0].quickselecter;

	oSuggest.findValue();

	return false;
}

function lookupLocal(){
	var oSuggest = $("#CityLocal")[0].quickselecter;

	oSuggest.findValue();

	return false;
}

$(function(){
	$("#city_select").quickselect();

	$('#CityAjax').quickselect({
		ajax:'As.json',
		match:'substring',
		autoSelectFirst:false,
		additional_fields:$('#other_thing_field')
	});
});
</script>

<blockquote>
	<h3>
		Note
	</h3>

	<p>
		There have been several reports of the contents of the iFrame being
		placed into the text box when the [TAB] key is pressed. This is due
		to a bug in jQuery v1.1.1 and not w/this code. See the following
		thread on the jQuery Mailing List for more information:
		<a href="http://www.nabble.com/Bug-in-$()-in-jQuery-v1.1.1--t3144910.html#nabble.i8718421">http://www.nabble.com/Bug-in-$()-in-jQuery-v1.1.1--t3144910.html#nabble.i8718421</a>.
	</p>
	<p>
		This bug is fixed in jQuery v1.2.1.
	</p>
</blockquote>

<h2>
	Download
</h2>

<p>
	<a href="jquery.quickselect.js">jquery.quickselect.js</a>
	<br />
	<a href="jquery.autocomplete.css">jquery.autocomplete.css</a>
</p>

</body>
</html>
